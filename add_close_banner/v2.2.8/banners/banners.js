define(["exports","text!./banners.html","../websockets/binary_websockets","css!banners/banners.css"],function(n,t,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=n.isMFCountry=n.isEuCountry=void 0;var i=a(t),s=a(e);function a(n){return n&&n.__esModule?n:{default:n}}var c=n.isEuCountry=function(n,t){var e=new RegExp("^(maltainvest|malta|iom)$"),i=new RegExp("^mt$"),a=t&&t.financial_company?t.financial_company.shortcode:"",o=t&&t.gaming_company?t.gaming_company.shortcode:"";return a||o?e.test(a)||e.test(o):i.test(n)},r=n.isMFCountry=function(n){var t=new RegExp("^(maltainvest)$"),e=n&&n.gaming_company?n.gaming_company.shortcode:"";return!!e&&t.test(e)},o=n.init=function(){var n=$(i.default).i18n();$("body").find("nav").after(n),document.getElementById("close_banner_btn_iom").href=getDerivUrl(""),u()},u=function(){var o=document.getElementById("close_banner_container");local_storage.get("oauth")?s.default.cached.authorize().then(function(){var t=local_storage.get("authorize").loginid,n=loginids().filter(function(n){return n.id===t}),e=n[0].is_mf,i=n[0].is_virtual,a=local_storage.get("authorize").country;s.default.send({landing_company:a}).then(function(n){var t=n.landing_company;c(a,t)&&(e||r(t)&&i)?o.classList.remove("invisible"):o.classList.add("invisible")})}):s.default.send({website_status:1}).then(function(n){var e=n.website_status.clients_country;s.default.send({landing_company:e}).then(function(n){var t=n.landing_company;c(e,t)?o.classList.remove("invisible"):o.classList.add("invisible")})})};s.default.events.on("login",function(){u()}),s.default.events.on("logout",function(){u()}),s.default.events.on("switch_account",function(){u()}),n.default={init:o,isEuCountry:c}});